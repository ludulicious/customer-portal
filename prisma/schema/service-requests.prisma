enum ServiceRequestStatus {
  OPEN
  IN_PROGRESS
  RESOLVED
  CLOSED
}

enum ServiceRequestPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

model ServiceRequest {
  id             String                  @id @default(cuid())
  title          String
  description    String                  @db.Text
  status         ServiceRequestStatus    @default(OPEN)
  priority       ServiceRequestPriority  @default(MEDIUM)
  category       String?
  
  // Organization relationship
  organizationId String
  organization   Organization            @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  
  // User relationships
  createdById    String
  createdBy      User                    @relation("ServiceRequestCreator", fields: [createdById], references: [id])
  
  assignedToId   String?
  assignedTo     User?                   @relation("ServiceRequestAssignee", fields: [assignedToId], references: [id])
  
  // Metadata
  attachments    Json?                   // Array of file URLs or metadata
  internalNotes  String?                 @db.Text
  
  // Timestamps
  createdAt      DateTime                @default(now())
  updatedAt      DateTime                @updatedAt
  resolvedAt     DateTime?
  closedAt       DateTime?
  
  @@index([organizationId])
  @@index([createdById])
  @@index([assignedToId])
  @@index([status])
  @@index([createdAt])
  @@map("service_requests")
}

